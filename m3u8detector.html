<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>M3U8 Detector & Video Extractor Bookmarklets</title>
    <!-- Version: v2.8.7 | Last Updated: November 13, 2025 at 11:00 AM -->
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
        .bookmarklet { background: #f0f8ff; border: 2px dashed #007bff; padding: 15px; margin: 20px 0; border-radius: 8px; }
        .bookmarklet h3 { margin-top: 0; color: #007bff; }
        .bookmarklet a { display: inline-block; background: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; font-weight: bold; }
        .bookmarklet a:hover { background: #0056b3; }
    </style>
</head>

<body>
    
    <div style="background: #e8f4fd; border-left: 4px solid #007bff; padding: 10px; margin-bottom: 20px; font-size: 12px; color: #666;">
        <strong>Version:</strong> v2.8.7 | <strong>Last Updated:</strong> November 13, 2025 at 11:00 AM - Normalizes non-breaking spaces
    </div>
    
    <h1>M3U8 Detector & Video Extractor Bookmarklets</h1>
    <div class="bookmarklet">
        <h3>CSS Selector Video Extractor (No Regex)</h3>
        <p>Enhanced bookmarklet using CSS selectors to find video elements directly (no regex parsing).</p>
        <p><a href='javascript:(function(){var a=null,b=0;function c(d,e){b=Math.max(b,e);var f=d.querySelectorAll("script[type=\"application/ld+json\"]");for(var g=0;g<f.length;g++){try{var h=JSON.parse(f[g].textContent);if(h.contentUrl&&h.contentUrl.includes(".m3u8")){a=h.contentUrl;return a;}}catch(i){}}var j=d.querySelectorAll("video");for(var k=0;k<j.length;k++){var l=j[k].querySelectorAll("source[type=\"application/x-mpegURL\"]");for(var m=0;m<l.length;m++){if(l[m].src&&l[m].src.includes(".m3u8")){a=l[m].src.split("?")[0];return a;}}}if(e<3){var n=d.querySelectorAll("iframe");for(var o=0;o<n.length;o++){try{var p=n[o].contentDocument||n[o].contentWindow.document;if(p){var q=c(p,e+1);if(q)return q;}}catch(r){}}}return null;}try{a=c(document,0);if(!a){alert("No M3U8 video found - searched "+(b+1)+" iframe levels");return;}var s=window.top.document,t="Video",u=["svg g g g g text[font-size=\"24px\"]","svg text[font-size=\"24px\"]","text[font-size=\"24\"]"];for(var v=0;v<u.length;v++){var w=s.querySelector(u[v]);if(w&&w.textContent&&w.textContent.trim().length>0){t=w.textContent.trim();break;}}var x="",y=["svg g g g g text[font-size=\"19px\"]","svg text[font-size=\"19px\"]","text[font-size=\"19\"]"];for(var z=0;z<y.length;z++){var A=s.querySelector(y[z]);if(A&&A.textContent&&A.textContent.trim().length>0){x=A.textContent.trim();break;}}var B="",C=["div[data-acc-text*=\"Page\"][data-acc-text*=\"of\"]","div.slide-object[data-acc-text*=\"Page\"]","div[data-display-name=\"SlideObject\"][data-acc-text*=\"Page\"]","span[data-original-size=\"16px\"]","p span","span"];for(var D=0;D<C.length;D++){var E=s.querySelectorAll(C[D]);for(var F=0;F<E.length;F++){var G=E[F].textContent?E[F].textContent.trim():"",H=E[F].getAttribute("data-acc-text")||"",I=H||G,J="Page ";if(I.indexOf(J)!==-1&&I.indexOf("of")!==-1){var K=I.indexOf(J)+J.length,L=I.indexOf(" of"),M=I.substring(K,L);if(M.length===1){M="0"+M}B="-page-"+M;break;}}if(B)break;}if(!B){B="-page-"+Math.floor(Math.random()*10+1);}function N(O){var P="";for(var Q=0;Q<O.length;Q++){var R=O.charCodeAt(Q);P+=R===160?"-":O.charAt(Q);}P=P.replace(/:/g,"-").replace(/[<>"|?*\\/]/g,"-").replace(/\s+/g,"-").replace(/,/g, "");;return P.trim();}var S=N(t),T=N(x),U;if(T){U=S+"\\"+T+"\\"+T+B+".mp4";}else{U=S+B+".mp4";}var V="dlm3u8.bat \""+a+"\" \""+U+"\"",W="";for(var X=0;X<V.length;X++){W+=(V.charCodeAt(X)===160)?"-":V.charAt(X);}navigator.clipboard.writeText(W).then(function(){alert("Command copied to clipboard:\n\n"+W);}).catch(function(){prompt("Copy this command:",W);});}catch(Y){alert("Error: "+Y.message+" - check console for details");}})();'>ðŸŽ¯ Enhanced JSON-LD Extractor</a></p>
        <p style="font-size: 12px; color: #666;">This bookmarklet uses direct CSS selectors to find &lt;video&gt; elements and their &lt;source&gt; tags with type="application/x-mpegURL"</p>
    </div>
</body>
</html>
